<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="400" height="300" backgroundColor="#000000" borderColor="#FFFFFF"
	 status="{clientModel.status}" title="FlexTermShell" cornerRadius="0" color="#FFFFFF" borderStyle="solid" headerHeight="35" borderThickness="1" borderThicknessTop="0" borderThicknessRight="0" borderThicknessLeft="0" borderThicknessBottom="0" 
	 xmlns:components="com.godpaper.flexTermShell.view.components.*">
	<mx:titleIcon>@Embed(source='../../../../../assets/images/icon.png')</mx:titleIcon>
	<mx:Script>
		<![CDATA[
			import com.godpaper.flexTermShell.vo.SSH2VO;
			import com.godpaper.flexTermShell.events.TryConnectThenExecEvent;
			import com.adobe.cairngorm.control.CairngormEventDispatcher;
			import mx.controls.Alert;
			import com.godpaper.flexTermShell.model.ClientModelLocator;
			
			[Bindable]private var clientModel:ClientModelLocator = ClientModelLocator.getInstance();
			internal var lastCommand:String;
			internal var mySSH2VO:SSH2VO = new SSH2VO();
			
			internal function onKeyUp(event:KeyboardEvent):void
			{
				if(event.keyCode==13)
				{
					lastCommand = MyTextArea.text.substring(MyTextArea.text.lastIndexOf("$ ")+1,MyTextArea.text.length-1);
//					Alert.show(MyTextArea.text,lastCommand);
					mySSH2VO.host = clientModel.userLoginInfo.host;
					mySSH2VO.port = clientModel.userLoginInfo.port;
					mySSH2VO.timeout = clientModel.userLoginInfo.timeout;
					mySSH2VO.username = clientModel.userLoginInfo.username;
					mySSH2VO.password = clientModel.userLoginInfo.password;
					mySSH2VO.command = lastCommand;
					CairngormEventDispatcher.getInstance().dispatchEvent(new TryConnectThenExecEvent(mySSH2VO));
				}
			}
		]]>
	</mx:Script>
	
	<mx:HBox width="100%" height="20"  verticalAlign="middle" color="#CCCCCC" borderStyle="solid" horizontalAlign="center">
		<mx:Text text="{'Current Working Directory:'+clientModel.resultInvokedByPWDorCD}"/>
	</mx:HBox>
	<mx:TextArea id="MyTextArea" width="100%" height="100%" borderColor="#FFFFFF" backgroundColor="#000000" 
			text="$ " alpha="0.5" fontSize="12" x="0" y="20" keyUp="onKeyUp(event)"/>
			
	<components:MainPanelHelper id="mainPanelHelper"/>		
</mx:Panel>
